var chai = require('chai');
var should = chai.should();
var rewire = require('rewire');
const imdct = rewire('../src/imdct');

describe('imdct', function () {
    describe('private datas', function () {
        // expect imdctWinData
        // [
        //      [0.043619387 0.13052619 0.21643962 0.3007058 0.38268343 0.4617486 0.53729963 0.6087614 0.6755902 0.7372773 0.7933533 0.8433914 0.8870108 0.9238795 0.95371693 0.976296 0.9914449 0.99904823 0.99904823 0.9914449 0.976296 0.95371693 0.9238795 0.8870108 0.8433914 0.7933533 0.7372773 0.6755902 0.6087614 0.53729963 0.4617486 0.38268343 0.3007058 0.21643962 0.13052619 0.043619387]
        //      [0.043619387 0.13052619 0.21643962 0.3007058 0.38268343 0.4617486 0.53729963 0.6087614 0.6755902 0.7372773 0.7933533 0.8433914 0.8870108 0.9238795 0.95371693 0.976296 0.9914449 0.99904823 1 1 1 1 1 1 0.9914449 0.9238795 0.7933533 0.6087614 0.38268343 0.13052619 0 0 0 0 0 0]
        //      [0.13052619 0.38268343 0.6087614 0.7933533 0.9238795 0.9914449 0.9914449 0.9238795 0.7933533 0.6087614 0.38268343 0.13052619 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]
        //      [0 0 0 0 0 0 0.13052619 0.38268343 0.6087614 0.7933533 0.9238795 0.9914449 1 1 1 1 1 1 0.99904823 0.9914449 0.976296 0.95371693 0.9238795 0.8870108 0.8433914 0.7933533 0.7372773 0.6755902 0.6087614 0.53729963 0.4617486 0.38268343 0.3007058 0.21643962 0.13052619 0.043619387]
        // ]
        var imdctWinData = imdct.__get__('imdctWinData');
        console.log('imdctWinData');
        console.log(imdctWinData);
        console.log('---------');

        // expect cosN12
        // [
        //      [0.6087614 0.38268343 0.13052619 -0.13052619 -0.38268343 -0.6087614 -0.7933533 -0.9238795 -0.9914449 -0.9914449 -0.9238795 -0.7933533]
        //      [-0.9238795 -0.9238795 -0.38268343 0.38268343 0.9238795 0.9238795 0.38268343 -0.38268343 -0.9238795 -0.9238795 -0.38268343 0.38268343]
        //      [-0.13052619 0.9238795 0.6087614 -0.6087614 -0.9238795 0.13052619 0.9914449 0.38268343 -0.7933533 -0.7933533 0.38268343 0.9914449]
        //      [0.9914449 -0.38268343 -0.7933533 0.7933533 0.38268343 -0.9914449 0.13052619 0.9238795 -0.6087614 -0.6087614 0.9238795 0.13052619]
        //      [-0.38268343 -0.38268343 0.9238795 -0.9238795 0.38268343 0.38268343 -0.9238795 0.9238795 -0.38268343 -0.38268343 0.9238795 -0.9238795]
        //      [-0.7933533 0.9238795 -0.9914449 0.9914449 -0.9238795 0.7933533 -0.6087614 0.38268343 -0.13052619 -0.13052619 0.38268343 -0.6087614]
        // ]
        var cosN12 = imdct.__get__('cosN12');
        console.log('cosN12');
        console.log(cosN12);

        // expect cosN36
        // [
        //      [0.6755902 0.6087614 0.53729963 0.4617486 0.38268343 0.3007058 0.21643962 0.13052619 0.043619387 -0.043619387 -0.13052619 -0.21643962 -0.3007058 -0.38268343 -0.4617486 -0.53729963 -0.6087614 -0.6755902 -0.7372773 -0.7933533 -0.8433914 -0.8870108 -0.9238795 -0.95371693 -0.976296 -0.9914449 -0.99904823 -0.99904823 -0.9914449 -0.976296 -0.95371693 -0.9238795 -0.8870108 -0.8433914 -0.7933533 -0.7372773]
        //      [-0.7933533 -0.9238795 -0.9914449 -0.9914449 -0.9238795 -0.7933533 -0.6087614 -0.38268343 -0.13052619 0.13052619 0.38268343 0.6087614 0.7933533 0.9238795 0.9914449 0.9914449 0.9238795 0.7933533 0.6087614 0.38268343 0.13052619 -0.13052619 -0.38268343 -0.6087614 -0.7933533 -0.9238795 -0.9914449 -0.9914449 -0.9238795 -0.7933533 -0.6087614 -0.38268343 -0.13052619 0.13052619 0.38268343 0.6087614]
        //      [-0.53729963 -0.13052619 0.3007058 0.6755902 0.9238795 0.99904823 0.8870108 0.6087614 0.21643962 -0.21643962 -0.6087614 -0.8870108 -0.99904823 -0.9238795 -0.6755902 -0.3007058 0.13052619 0.53729963 0.8433914 0.9914449 0.95371693 0.7372773 0.38268343 -0.043619387 -0.4617486 -0.7933533 -0.976296 -0.976296 -0.7933533 -0.4617486 -0.043619387 0.38268343 0.7372773 0.95371693 0.9914449 0.8433914]
        //      [0.8870108 0.9914449 0.7372773 0.21643962 -0.38268343 -0.8433914 -0.99904823 -0.7933533 -0.3007058 0.3007058 0.7933533 0.99904823 0.8433914 0.38268343 -0.21643962 -0.7372773 -0.9914449 -0.8870108 -0.4617486 0.13052619 0.6755902 0.976296 0.9238795 0.53729963 -0.043619387 -0.6087614 -0.95371693 -0.95371693 -0.6087614 -0.043619387 0.53729963 0.9238795 0.976296 0.6755902 0.13052619 -0.4617486]
        //      [0.38268343 -0.38268343 -0.9238795 -0.9238795 -0.38268343 0.38268343 0.9238795 0.9238795 0.38268343 -0.38268343 -0.9238795 -0.9238795 -0.38268343 0.38268343 0.9238795 0.9238795 0.38268343 -0.38268343 -0.9238795 -0.9238795 -0.38268343 0.38268343 0.9238795 0.9238795 0.38268343 -0.38268343 -0.9238795 -0.9238795 -0.38268343 0.38268343 0.9238795 0.9238795 0.38268343 -0.38268343 -0.9238795 -0.9238795]
        //      [-0.95371693 -0.7933533 0.043619387 0.8433914 0.9238795 0.21643962 -0.6755902 -0.9914449 -0.4617486 0.4617486 0.9914449 0.6755902 -0.21643962 -0.9238795 -0.8433914 -0.043619387 0.7933533 0.95371693 0.3007058 -0.6087614 -0.99904823 -0.53729963 0.38268343 0.976296 0.7372773 -0.13052619 -0.8870108 -0.8870108 -0.13052619 0.7372773 0.976296 0.38268343 -0.53729963 -0.99904823 -0.6087614 0.3007058]
        //      [-0.21643962 0.7933533 0.8870108 -0.043619387 -0.9238795 -0.7372773 0.3007058 0.9914449 0.53729963 -0.53729963 -0.9914449 -0.3007058 0.7372773 0.9238795 0.043619387 -0.8870108 -0.7933533 0.21643962 0.976296 0.6087614 -0.4617486 -0.99904823 -0.38268343 0.6755902 0.95371693 0.13052619 -0.8433914 -0.8433914 0.13052619 0.95371693 0.6755902 -0.38268343 -0.99904823 -0.4617486 0.6087614 0.976296]
        //      [0.9914449 0.38268343 -0.7933533 -0.7933533 0.38268343 0.9914449 0.13052619 -0.9238795 -0.6087614 0.6087614 0.9238795 -0.13052619 -0.9914449 -0.38268343 0.7933533 0.7933533 -0.38268343 -0.9914449 -0.13052619 0.9238795 0.6087614 -0.6087614 -0.9238795 0.13052619 0.9914449 0.38268343 -0.7933533 -0.7933533 0.38268343 0.9914449 0.13052619 -0.9238795 -0.6087614 0.6087614 0.9238795 -0.13052619]
        //      [0.043619387 -0.9914449 -0.21643962 0.95371693 0.38268343 -0.8870108 -0.53729963 0.7933533 0.6755902 -0.6755902 -0.7933533 0.53729963 0.8870108 -0.38268343 -0.95371693 0.21643962 0.9914449 -0.043619387 -0.99904823 -0.13052619 0.976296 0.3007058 -0.9238795 -0.4617486 0.8433914 0.6087614 -0.7372773 -0.7372773 0.6087614 0.8433914 -0.4617486 -0.9238795 0.3007058 0.976296 -0.13052619 -0.99904823]
        //      [-0.99904823 0.13052619 0.976296 -0.3007058 -0.9238795 0.4617486 0.8433914 -0.6087614 -0.7372773 0.7372773 0.6087614 -0.8433914 -0.4617486 0.9238795 0.3007058 -0.976296 -0.13052619 0.99904823 -0.043619387 -0.9914449 0.21643962 0.95371693 -0.38268343 -0.8870108 0.53729963 0.7933533 -0.6755902 -0.6755902 0.7933533 0.53729963 -0.8870108 -0.38268343 0.95371693 0.21643962 -0.9914449 -0.043619387]
        //      [0.13052619 0.9238795 -0.6087614 -0.6087614 0.9238795 0.13052619 -0.9914449 0.38268343 0.7933533 -0.7933533 -0.38268343 0.9914449 -0.13052619 -0.9238795 0.6087614 0.6087614 -0.9238795 -0.13052619 0.9914449 -0.38268343 -0.7933533 0.7933533 0.38268343 -0.9914449 0.13052619 0.9238795 -0.6087614 -0.6087614 0.9238795 0.13052619 -0.9914449 0.38268343 0.7933533 -0.7933533 -0.38268343 0.9914449]
        //      [0.976296 -0.6087614 -0.4617486 0.99904823 -0.38268343 -0.6755902 0.95371693 -0.13052619 -0.8433914 0.8433914 0.13052619 -0.95371693 0.6755902 0.38268343 -0.99904823 0.4617486 0.6087614 -0.976296 0.21643962 0.7933533 -0.8870108 -0.043619387 0.9238795 -0.7372773 -0.3007058 0.9914449 -0.53729963 -0.53729963 0.9914449 -0.3007058 -0.7372773 0.9238795 -0.043619387 -0.8870108 0.7933533 0.21643962]
        //      [-0.3007058 -0.6087614 0.99904823 -0.53729963 -0.38268343 0.976296 -0.7372773 -0.13052619 0.8870108 -0.8870108 0.13052619 0.7372773 -0.976296 0.38268343 0.53729963 -0.99904823 0.6087614 0.3007058 -0.95371693 0.7933533 0.043619387 -0.8433914 0.9238795 -0.21643962 -0.6755902 0.9914449 -0.4617486 -0.4617486 0.9914449 -0.6755902 -0.21643962 0.9238795 -0.8433914 0.043619387 0.7933533 -0.95371693]
        //      [-0.9238795 0.9238795 -0.38268343 -0.38268343 0.9238795 -0.9238795 0.38268343 0.38268343 -0.9238795 0.9238795 -0.38268343 -0.38268343 0.9238795 -0.9238795 0.38268343 0.38268343 -0.9238795 0.9238795 -0.38268343 -0.38268343 0.9238795 -0.9238795 0.38268343 0.38268343 -0.9238795 0.9238795 -0.38268343 -0.38268343 0.9238795 -0.9238795 0.38268343 0.38268343 -0.9238795 0.9238795 -0.38268343 -0.38268343]
        //      [0.4617486 0.13052619 -0.6755902 0.976296 -0.9238795 0.53729963 0.043619387 -0.6087614 0.95371693 -0.95371693 0.6087614 -0.043619387 -0.53729963 0.9238795 -0.976296 0.6755902 -0.13052619 -0.4617486 0.8870108 -0.9914449 0.7372773 -0.21643962 -0.38268343 0.8433914 -0.99904823 0.7933533 -0.3007058 -0.3007058 0.7933533 -0.99904823 0.8433914 -0.38268343 -0.21643962 0.7372773 -0.9914449 0.8870108]
        //      [0.8433914 -0.9914449 0.95371693 -0.7372773 0.38268343 0.043619387 -0.4617486 0.7933533 -0.976296 0.976296 -0.7933533 0.4617486 -0.043619387 -0.38268343 0.7372773 -0.95371693 0.9914449 -0.8433914 0.53729963 -0.13052619 -0.3007058 0.6755902 -0.9238795 0.99904823 -0.8870108 0.6087614 -0.21643962 -0.21643962 0.6087614 -0.8870108 0.99904823 -0.9238795 0.6755902 -0.3007058 -0.13052619 0.53729963]
        //      [-0.6087614 0.38268343 -0.13052619 -0.13052619 0.38268343 -0.6087614 0.7933533 -0.9238795 0.9914449 -0.9914449 0.9238795 -0.7933533 0.6087614 -0.38268343 0.13052619 0.13052619 -0.38268343 0.6087614 -0.7933533 0.9238795 -0.9914449 0.9914449 -0.9238795 0.7933533 -0.6087614 0.38268343 -0.13052619 -0.13052619 0.38268343 -0.6087614 0.7933533 -0.9238795 0.9914449 -0.9914449 0.9238795 -0.7933533]
        //      [-0.7372773 0.7933533 -0.8433914 0.8870108 -0.9238795 0.95371693 -0.976296 0.9914449 -0.99904823 0.99904823 -0.9914449 0.976296 -0.95371693 0.9238795 -0.8870108 0.8433914 -0.7933533 0.7372773 -0.6755902 0.6087614 -0.53729963 0.4617486 -0.38268343 0.3007058 -0.21643962 0.13052619 -0.043619387 -0.043619387 0.13052619 -0.21643962 0.3007058 -0.38268343 0.4617486 -0.53729963 0.6087614 -0.6755902]
        // ]
        var cosN36 = imdct.__get__('cosN36');
        console.log('cosN36');
        console.log(cosN36);

        var inData = [
            0.027665503
            , -0.012751893
            , -0.004376227
            , -0.0024043852
            , -2.3341929e-05
            , 0.01011816
            , -0.012551669
            , -0.0065209903
            , -0.00019957068
            , 0.0036992596
            , 0.0025054845
            , 0.0004234002
            , -0.00038722096
            , -0.0010527271
            , -0.00077505654
            , 6.358905e-05
            , 0.00068894523
            , 0.0010765858
        ];
        var blockType = 0;
        var out = imdct.Win(inData, blockType);

        var expectData = [0.0005332994
            , 0.0012129779
            , 0.004427942
            , 0.010369493
            , 0.013603132
            , 0.010978528
            , 0.00067171524
            , -0.0058710836
            , -0.0044618975
            , 0.0048693065
            , 0.0076513444
            , -0.0010543816
            , -0.021089556
            , -0.032840867
            , -0.032887828
            , -0.019973155
            , -0.009213483
            , -0.012214564
            , -0.037585035
            , -0.052944582
            , -0.042632874
            , -0.008829176
            , -0.010485895
            , -0.02237184
            , -0.018920349
            , -0.009629887
            , -0.003734616
            , -0.0034221453
            , -0.007389272
            , -0.012053593
            , -0.011646043
            , -0.0043434
            , -0.0027838286
            , -0.009451481
            , -0.006970286
            , -0.0016409981
        ];


    });
});